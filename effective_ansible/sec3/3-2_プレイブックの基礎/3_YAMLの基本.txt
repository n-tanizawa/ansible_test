[YAMLの基本]
YAMLとは、構造化データの表現方法であり、簡単に言うとデータ形式の一種。
YAMLは読みやすく、書きやすく、わかりやすいという特徴があり、プログラミング未経験者でもすぐに記述できる構文となっている。

・データ形式
データ形式は、インデントによって階層構造を示すコレクションと、それ以外のデータを示すスカラーを組み合わせてデータを表現する。
コレクションは、「シーケンス」「マッピング」と呼ばれる配列のデータ形式を持つ。

・表記方法
YAMLには、インデントと改行を利用して構造を表現するブロックスタイルと、{ }や[ ]などのJSONスタイルで構造を表現する
フロースタイルがある。プレイブックでは、両方の記載方法が利用できるが、通常は可読性の高いブロックスタイルを利用する。

・YAMLの表記例
## ブロックスタイル
tasks:
    - name: Create Group 
      group: name=management
    - name: Create User 
      user: name=ansible

## フロースタイル　
tasks[ {name: Create Group, group: name=management},{name: Create User, user= name=ansible} ]

・コメント
コメントは#から行末までをコメントとしてみなす。なお、範囲指定のコメント表記はYAMLにはない。

・開始、終了表記
YAMLファイルは、はじめに「---」から開始し、「...」で定義分を終了する構造。
したがって、「...」以降は本来YAMLとして解釈されない。これらがなくてもプレイブックはYAMLを前提として解釈されるため、
問題はないが、開始には「---」を付けるのが良い。

・コレクションの書式
コレクションとは値を入れるためのデータ形式であり、YAMLで配列を「シーケンス」、連想配列（ハッシュ）を「マッピング」と
呼んでいる。Ansibleのドキュメントでは「シーケンス」のことを「リスト」、「マッピング」のことを「ディクショナリ」と
記載している。

・シーケンス書式例
先頭に「-」を付けて値を列挙することにより、配列やリストを表現する。

- ## 値がない行の後にインデントとハイフンを使うと入れ子構造になる
  - Kansai
  - Kyushu
  -
    - Tokyo
    - Kanagawa
    - Chiba

・マッピング書式例
fruit: ## この行には値を代入できない
  apple: リンゴ
  orange: みかん
  lemon: レモン

コレクションはスペースでインデントすることにより、ネストを表現することが可能。
ただし、マッピングでネストを利用する場合は、ネストした後の配列が上位のKeyの値となるため、Keyと同じ行で値を
代入することはできない。また、Ansibleでは、シーケンスとマッピングが単体で利用されることはなく、組み合わせて
利用される。

・コレクションの書式
- host: all
  vars: #マッピングがネストされるので、値は入らない
    ntp_conf: /tmp/ntp.conf 

  tasks: #シーケンスがネストされるので、値は入らない
(1)
↑  - name: Install ntp
|    yum: name=ntp state=installed
|
|  - name: Configure ntp
|    copy: src={{ ntp_conf }} dest= /etc/ntp_conf
|   (2)
|  -↑name: Run and Enable ntp
↓   ↓service: name=ntpd state=running enabled=yes
(1)マッピングの中にシーケンスをネスト
(2)シーケンスの中にマッピングをネスト

・スカラーの書式
スカラーはデータ型であり、値によって以下のデータ型が自動的に判別される。
Ansibleのプライブック特に利用される値は、「文字列」と「真偽値」。

・文字列
・数値（整数、浮動小数点）
・真偽値
・Null値
・日付

・文字列
文字列を表現したい場合は、シングルクォートかダブルクォートで囲む。ダブルクォートの場合のみ、エスケープシーケンスを
利用した表記が可能。
また、Ansibleでは長いコマンドを表記する際や、複数の連続したアーギュメントを持つモジュールを利用する場合に、文字列の
折り返し構文を使用できる。YAMLで記述が可能な折り返し構文は、リテラルスタイルと折り畳みスタイルの2種類。
リテラルスタイルは|を利用し、その後の改行を文字列上の改行としてみなす構文。
折り畳みスタイルは、>記号を利用し、その後の改行をスペースと置き換える構文。さらに、通常はこれらに-を加えることにより、
最終行の対象から末尾の改行文字を削除する。

・スカラー書式例
## 長いコマンドの実行
    - shell: git clone https://github.com/ansible/ansible.git --recursive; cd ./ansible; make install

## リテラルスタイルの活用:文字列として改行を含む後続3行をKeyの値とし、最終行の改行コードを削除
    - shell: |-
      git clone https://github.com/ansible/ansible.git --recursive
      cd ./ansible
      make install

## 複数のアーギュメントを持つモジュールの実行
    - user: name=ansible generate_ssh_key=yes ssh_key_bits=2048 ssh_key_file=.ssh/id_rsa

## 折り畳みスタイルの活用:改行をスペースに変換し、最終行の改行コードを削除して1行とする
- user: >-
    name=ansible
    generate_ssh_key=yes
    ssh_key_bits=2048
    ssh_key_file=.ssh/id_rsa

・真偽値
「true」「yes」「on」「1」はTRUE、「false」「no」「off」「0」はFALSEとして取り扱われる。
またこれらの文字の大文字表記も同様に認識される。ただし、プレイブック内では、モジュールのオプション（アーギュメント）
には「yes/no」、その他のディレクティブには「true/false」を使うのが一般的。