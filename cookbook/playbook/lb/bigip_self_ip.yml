---
- hosts: bigip
  connection: ansible.builtin.local
  gather_facts: false
  var:
    interface_info:
      - { name: "internal_selfip" , int_add: 10.44.228.167 , int_net: 24 , vlan: "internal" }
      - { name: "external_selfip" , int_add: 192.168.1.70 , int_net: 24 , vlan: "external" }
      - { name: "HA_selfip" , int_add: 10.44.229.173 , int_net: 24 , vlan: "HA" }

  tasks:
    - name: create selfip(non-flooting)
      f5networks.f5_modules.bigip_selfip:
        state: present
        name: "{{ item.name }}"
        address: "{{ item.int_add }}"
        netmask: "{{ item.int_net }}"
        vlan: "{{ item.vlan }}"
        allow_service: default
        traffic_group: /Common/traffic-group-local-only
      loop: "{{ interface_info }}"
